<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta id="repository-name" content="github.com/imdrasil/time_zone">
  <link href="css/style.css" rel="stylesheet" type="text/css" />
  <script type="text/javascript" src="js/doc.js"></script>
  <title>README - github.com/imdrasil/time_zone</title>
</head>
<body>

<div id="types-list">
  <div id="search-box">
    <input type="search" id="search-input" placeholder="Search...">
  </div>

  <ul>
    <li class="current"><a href="index.html">README</a></li>
  </ul>

  <ul>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/Time" data-name="time">
      <a href="Time.html">Time</a>
      
    </li>
  
  <li class="parent " data-id="github.com/imdrasil/time_zone/TimeZone" data-name="timezone">
      <a href="TimeZone.html">TimeZone</a>
      
        <ul>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/AmbiguousTime" data-name="timezone::ambiguoustime">
      <a href="TimeZone/AmbiguousTime.html">AmbiguousTime</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/BaseExeption" data-name="timezone::baseexeption">
      <a href="TimeZone/BaseExeption.html">BaseExeption</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/BSearch" data-name="timezone::bsearch">
      <a href="TimeZone/BSearch.html">BSearch</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Country" data-name="timezone::country">
      <a href="TimeZone/Country.html">Country</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/FixedOffsetPeriod" data-name="timezone::fixedoffsetperiod">
      <a href="TimeZone/FixedOffsetPeriod.html">FixedOffsetPeriod</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/FixedOffsetPeriodSet" data-name="timezone::fixedoffsetperiodset">
      <a href="TimeZone/FixedOffsetPeriodSet.html">FixedOffsetPeriodSet</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/InvalidCountryCode" data-name="timezone::invalidcountrycode">
      <a href="TimeZone/InvalidCountryCode.html">InvalidCountryCode</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/InvalidTimeZoneName" data-name="timezone::invalidtimezonename">
      <a href="TimeZone/InvalidTimeZoneName.html">InvalidTimeZoneName</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/IPeriod" data-name="timezone::iperiod">
      <a href="TimeZone/IPeriod.html">IPeriod</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/IZone" data-name="timezone::izone">
      <a href="TimeZone/IZone.html">IZone</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/LastPeriod" data-name="timezone::lastperiod">
      <a href="TimeZone/LastPeriod.html">LastPeriod</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/LinkedZone" data-name="timezone::linkedzone">
      <a href="TimeZone/LinkedZone.html">LinkedZone</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Offset" data-name="timezone::offset">
      <a href="TimeZone/Offset.html">Offset</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Period" data-name="timezone::period">
      <a href="TimeZone/Period.html">Period</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/PeriodSet" data-name="timezone::periodset">
      <a href="TimeZone/PeriodSet.html">PeriodSet</a>
      
    </li>
  
  <li class="parent " data-id="github.com/imdrasil/time_zone/TimeZone/Register" data-name="timezone::register">
      <a href="TimeZone/Register.html">Register</a>
      
        <ul>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Register/CountryBuilder" data-name="timezone::register::countrybuilder">
      <a href="TimeZone/Register/CountryBuilder.html">CountryBuilder</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Register/ZoneBuilder" data-name="timezone::register::zonebuilder">
      <a href="TimeZone/Register/ZoneBuilder.html">ZoneBuilder</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/StartPeriod" data-name="timezone::startperiod">
      <a href="TimeZone/StartPeriod.html">StartPeriod</a>
      
    </li>
  
  <li class="parent " data-id="github.com/imdrasil/time_zone/TimeZone/Time" data-name="timezone::time">
      <a href="TimeZone/Time.html">Time</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/imdrasil/time_zone/TimeZone/Time/CanonicalTimeInstanceMethods" data-name="timezone::time::canonicaltimeinstancemethods">
      <a href="TimeZone/Time/CanonicalTimeInstanceMethods.html">CanonicalTimeInstanceMethods</a>
      
        <ul>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Time/CanonicalTimeInstanceMethods/DayOfWeek" data-name="timezone::time::canonicaltimeinstancemethods::dayofweek">
      <a href="TimeZone/Time/CanonicalTimeInstanceMethods/DayOfWeek.html">DayOfWeek</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Time/CanonicalTimeInstanceMethods/Kind" data-name="timezone::time::canonicaltimeinstancemethods::kind">
      <a href="TimeZone/Time/CanonicalTimeInstanceMethods/Kind.html">Kind</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Time/CanonicalTimeInstanceMethods/MonthSpan" data-name="timezone::time::canonicaltimeinstancemethods::monthspan">
      <a href="TimeZone/Time/CanonicalTimeInstanceMethods/MonthSpan.html">MonthSpan</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Time/CanonicalTimeInstanceMethods/Span" data-name="timezone::time::canonicaltimeinstancemethods::span">
      <a href="TimeZone/Time/CanonicalTimeInstanceMethods/Span.html">Span</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Time/Format" data-name="timezone::time::format">
      <a href="TimeZone/Time/Format.html">Format</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Time/Formatter" data-name="timezone::time::formatter">
      <a href="TimeZone/Time/Formatter.html">Formatter</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Time/Parser" data-name="timezone::time::parser">
      <a href="TimeZone/Time/Parser.html">Parser</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Transition" data-name="timezone::transition">
      <a href="TimeZone/Transition.html">Transition</a>
      
    </li>
  
  <li class=" " data-id="github.com/imdrasil/time_zone/TimeZone/Zone" data-name="timezone::zone">
      <a href="TimeZone/Zone.html">Zone</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

</div>

<div id="main-content">
<h1>TimeZone <a href="https://travis-ci.org/imdrasil/time_zone" target="_blank"><img src="https://travis-ci.org/imdrasil/time_zone.svg" alt="Build Status"/></a> <a href="https://github.com/imdrasil/time_zone/releases" target="_blank"><img src="https://img.shields.io/github/release/imdrasil/time_zone.svg" alt="Latest Release"/></a> <a href="https://imdrasil.github.io/time_zone/latest/" target="_blank"><img src="https://img.shields.io/badge/docs-available-brightgreen.svg" alt="Docs"/></a></h1>

<p><strong>Time Zone</strong> provides daylight savings aware transformations between times in different time zones. Also this is a port of ruby <a href="https://github.com/tzinfo/tzinfo" target="_blank">tzinfo</a> gem.</p>

<h2>Installation</h2>

<p>Add this to your application's <code>shard.yml</code>:</p>

<pre><code class='language-yaml'>dependencies:
  time_zone:
    github: imdrasil/time_zone</code></pre>

<h2>Usage</h2>

<p>The following code will obtain the America/New_York timezone (as an instance
of <code>TZInfo::Timezone</code>) and convert a time in UTC to local New York time:</p>

<pre><code class='language-crystal'><span class="k">require</span> <span class="s">&quot;time_zone&quot;</span>

tz <span class="o">=</span> <span class="t">TimeZone</span><span class="t">::</span><span class="t">Zone</span>.get(<span class="s">&quot;America/New_York&quot;</span>)
local <span class="o">=</span> tz.utc_to_local(<span class="t">Time</span>.utc(<span class="n">2005</span>,<span class="n">8</span>,<span class="n">29</span>,<span class="n">15</span>,<span class="n">35</span>,<span class="n">0</span>))</code></pre>

<p>Note that the local Time returned will be kind of UTC (<code>local.kind</code> will
return <code>Time::Kind::Utc</code>). This is because the Crystal <code><a href="Time.html">Time</a></code> class only supports two timezones:</p>

<ul><li>UTC </li><li>the current system local timezone.</li></ul>

<p>To convert from a local time to UTC, the <code>#local_to_utc</code> method can be used as
follows:</p>

<pre><code class='language-crystal'>utc <span class="o">=</span> tz.local_to_utc(local)</code></pre>

<p>Note that the time zone information of the local Time object is ignored (TimeZone
will just read the date and time and treat them as if there were in the <code>tz</code>
timezone). The following two lines will return the same result regardless of
the system's local timezone:</p>

<pre><code class='language-crystal'>tz.local_to_utc(<span class="t">Time</span>.<span class="k">new</span>(<span class="n">2006</span>,<span class="n">6</span>,<span class="n">26</span>,<span class="n">1</span>,<span class="n">0</span>,<span class="n">0</span>))
tz.local_to_utc(<span class="t">Time</span>.utc(<span class="n">2006</span>,<span class="n">6</span>,<span class="n">26</span>,<span class="n">1</span>,<span class="n">0</span>,<span class="n">0</span>))</code></pre>

<p>The current local time in a <code>Zone</code> can be obtained with the
<code>TimeZone::Zone#now</code> method:</p>

<pre><code class='language-crystal'>now <span class="o">=</span> tz.now</code></pre>

<p>A list of all the available timezone identifiers can be obtained using the
<code>TimeZone::Zone.all_identifiers</code> method. <code>TimeZone::Zone.all</code> can be called
to get an <code>Array</code> of all the <code><a href="TimeZone/Zone.html">TimeZone::Zone</a></code> and <code><a href="TimeZone/LinkedZone.html">TimeZone::LinkedZone</a></code> instances.</p>

<p>Timezones can also be accessed by country (using an ISO 3166-1 alpha-2 country
code). The following code retrieves the <code><a href="TimeZone/Country.html">TimeZone::Country</a></code> instance representing
the USA (country code 'US') and then gets all the timezone identifiers used in
the USA.</p>

<pre><code class='language-crystal'>us <span class="o">=</span> <span class="t">TimeZone</span><span class="t">::</span><span class="t">Country</span>.get(</code></pre>

<p>A list of all the available country codes can be obtained using the
<code>TimeZone::Country.all_codes</code> method. <code>TimeZone::Country.all</code> can be called to get
an <code>Array</code> of all the <code>Country</code> instances.</p>

<h3>TimeZone::Time</h3>

<p>To hold time zone in the time object <code><a href="TimeZone/Time.html">TimeZone::Time</a></code> struct could be used. It provides almost same interface as the <code><a href="Time.html">Time</a></code> does. Also there is 2 methods added to <code><a href="Time.html">Time</a></code>:</p>

<ul><li><code>#to_time_zone_time</code> - converts current time object to <code><a href="TimeZone/Time.html">TimeZone::Time</a></code> in default time zone;</li><li><code>::zone</code> - returns default time zone.</li></ul>

<p>To set or get default time zone next code can be used:</p>

<pre><code class='language-crystal'><span class="t">TimeZone</span><span class="t">::</span><span class="t">Zone</span>.default <span class="c"># tries to read time zone from `TZ`</span>
					   <span class="c"># environment variable, otherwise UTC </span>
					   <span class="c"># will be used</span>
<span class="t">TimeZone</span><span class="t">::</span><span class="t">Zone</span>.default <span class="o">=</span> <span class="s">&quot;America/New_York&quot;</span>
<span class="c"># or</span>
<span class="t">TimeZone</span><span class="t">::</span><span class="t">Zone</span>.default <span class="o">=</span> <span class="t">TimeZone</span><span class="t">::</span><span class="t">Zone</span>.get(<span class="s">&quot;America/New_York&quot;</span>)</code></pre>

<p>To create specific date in time zone:</p>

<pre><code class='language-crystal'>zone.<span class="k">new</span>(<span class="n">2010</span>, <span class="n">10</span>, <span class="n">19</span>)
<span class="t">Time</span>.zone.<span class="k">new</span>(<span class="n">2012</span>, <span class="n">12</span>, <span class="n">12</span>) <span class="c"># in the default time zone</span></code></pre>

<p>Also <code><a href="TimeZone/Time.html">TimeZone::Time</a></code> could be parsed from string with grepping given time zone offset:</p>

<pre><code class='language-crystal'><span class="c"># Time zone will be set to Etc/GMT-5</span>
<span class="t">TimeZone</span><span class="t">::</span><span class="t">Time</span>.parse(<span class="s">&quot;2014-10-31 10:11:12 +05:00&quot;</span>, <span class="s">&quot;%F %T %z&quot;</span>)</code></pre>

<h2>Development</h2>

<h3>Data Generating</h3>

<p>All code in <code>src/time_zone/data</code> folder is automatically generated so please don't try to make any change there because they will be lost after next regenerating. To generate new version please paste all files from original <a href="https://github.com/eggert/tz" target="_blank">repo</a> to the <code>data</code> folder in the this repo root and invoke <code>ruby scripts/build.rb</code>.</p>

<h2>Contributing</h2>

<ol><li>Fork it ( https://github.com/imdrasil/time_zone/fork )</li><li>Create your feature branch (git checkout -b my-new-feature)</li><li>Commit your changes (git commit -am 'Add some feature')</li><li>Push to the branch (git push origin my-new-feature)</li><li>Create a new Pull Request</li></ol>

<h2>Contributors</h2>

<ul><li><a href="https://github.com/[your-github-name]" target="_blank">imdrasil</a> Roman Kalnytskyi - creator, maintainer</li></ul>
</div>
</body>
</html>
