crystal_doc_search_index_callback({"repository_name":"github.com/imdrasil/form_object","body":"# FormObject [![Build Status](https://travis-ci.org/imdrasil/form_object.svg)](https://travis-ci.org/imdrasil/form_object) [![Latest Release](https://img.shields.io/github/release/imdrasil/form_object.svg)](https://github.com/imdrasil/form_object/releases) [![Docs](https://img.shields.io/badge/docs-available-brightgreen.svg)](https://imdrasil.github.io/form_object/versions)\n\nThis shard gives you an opportunity to separate form data from your model. Also you can move ny data-specific validation to form object level and be free from coercing data from the request instance - it will take care of it.\n\n> ATM FormObject is designed to be used in air with [Jennifer](https://github.com/imdrasil/jennifer.cr) ORM but can be also used as ORM-agnostic tool but with some limitations.\n\n## Installation\n\nAdd this to your application's `shard.yml`:\n\n```yaml\ndependencies:\n  form_object:\n    github: imdrasil/form_object\n```\n\n## Usage\n\nRequire FromObject somewhere after Jennifer:\n\n```crystal\nrequire \"jennifer\"\n# ...\nrequire \"form_object\"\nrequire \"form_object/coercer/pg\" # if you are going to use PG::Numeric\n```\n\nAlso it is important to notice that `form_object` modifies `HTTP::Request` core class to store body in private variable `@cached_body : IO::Memory?` of maximum size 1 GB. This is done because to allow request body multiple reading.\n\n### Defining Form\n\nForms are defined in the separate classes. Often (but not necessary) these classes are pretty similar to related models:\n\n```crystal\nclass PostForm < FormObject::Base(Post)\n  attr :title, String\nend\n```\n\nUse `.attr` macro to define a field.\n\nAlso you can specify [any validation](https://github.com/imdrasil/jennifer.cr/blob/master/docs/validation.md) supported by Jennifer model.\n\n```crystal\nclass PostForm < FormObject::Base(Post)\n  attr :title, String\n\n  validates_length :title, in: 1...255\nend\n\nf = PostForm.new(Post.new)\nf.title = \"a\" * 255\nf.valid? # false\nf.errors # Jennifer::Model::Errors\n```\n\nResource model translation messages are used for the form.\n\n#### Nesting\n\nTo define nested object use `.object` macro:\n\n```crystal\nclass AddressForm < FormObject::Base(Address)\n  attr :street, Address\nend\n\nclass ContactForm < FormObject::Base(Contact)\n  object :address, Address\nend\n```\n\nFor collection use `.collection` macro.\n\n##### Populators\n\nIn `#verify`, nested hash is passed. Form object by default will try to match nested hashes to the nested forms. But sometimes the incoming hash and the existing object graph are not matching 1-to-1. That's where populators will help you.\n\nYou have to declare a populator when the form has to deserialize nested input. ATM populator may be only a method name.\n\nPopulator is called only if an incoming part for particular object is present.\n\n```crystal\n# request with { addresses: [{ :street => \"Some street\" }]} payload\nform.verify(request) # will call populator once\n# request with { addresses: [] of String} payload\nform.verify(request) # will not call populator\n```\n\nPopulator for collection is executed for every collection part in the incoming hash.\n\n```crystal\nclass ContactForm < FormObject::Base(Contact)\n  collection :addresses, Address, populator: :address_populator\n\n  def address_populator(collection, index, **opts)\n    if item = collection[index]?\n      item\n    else\n      item = AddressForm.new(Address.new({contact_id: resource.id}))\n      collection << item\n      item\n    end\n  end\n```\n\nThis populator checks if a nested form is already existing by using `collection[index]?`. While the `index` argument represents where we are in the incoming array traversal, `collection` is identical to `self.addresses`.\n\nIt is very important that each populator invocation returns the *form* not the model.\n\n##### Delete\n\nPopulators can not only create, but also destroy. Let's say the following input is passed in.\n\n```crystal\n# request with the { addresses: [{:street => \"Street\", :id => 2, :_delete => \"1\" }] } payload\nform.verify(request)\n```\n\nYou can implement your own deletion:\n\n```crystal\nclass ContactForm < FormObject::Base(Contact)\n  collection :addresses, Address, populator: :address_populator\n\n  property ids_to_destroy : Array(Int32)\n\n  def address_populator(context, **opts)\n    item = addresses.find { |address| address.id == context[\"id\"] }\n\n    if context[\"_delete\"]\n      addresses.delete(item)\n      ids_to_destroy << item.id\n      skip\n    end\n\n    if item\n      item\n    else\n      item = AddressForm.new(Address.new)\n      collection << item\n      item\n    end\n  end\n\n  def persist\n    super.tap do |result|\n      next unless result\n      ids = ids_to_destroy\n      Address.where { _id.in(ids) }.destroy\n    end\n  end\nend\n```\n\n##### Skip\n\nPopulators can skip processing of a part by invoking `#skip`. This method raises `FormObject::SkipException` which makes form object to ignore particular part.\n\n#### Reusability\n\nTo reuse common attributes or functionality you can use modules inclusion and inheritance:\n\n```crystal\nmodule PostTitle\n  include FormObject::Module\n\n  attr :title, String\nend\n\nmodule PostText\n  include FormObject::Module\n\n  attr :text, String\nend\n\nmodule BasePostAttributes\n  include PostTitle\n  include PostText\nend\n\nclass PostForm < FormObject::Base(Post)\n  include BasePostAttributes\n\n  attr :release_date, Time\n\n  validates_length :title, in: 1...255\nend\n\nclass AdvancedPostForm < PostForm\n  attr :likes, Int32\nend\n```\n\n### Create Form\n\n```crystal\nclass PostsController < ApplicationController\n  def edit\n    @form = PostForm.new(Post.find!(params[\"id\"]))\n    render(\"edit.slang\")\n  end\nend\n```\n\nForm will automatically read attributes from the model.\n\n### Validation\n\nTo save model you should validate input data:\n\n```crystal\nclass PostsController < ApplicationController\n  def create\n    @form = PostForm.new(Post.new)\n    if @form.verify(request) && @form.save\n      flash[\"success\"] = \"Created Post successfully.\"\n      redirect_to \"/posts\"\n    else\n      flash[\"danger\"] = \"Could not create Post!\"\n      render(\"new.slang\")\n    end\n  end\nend\n```\n\nThe `#verify` method parses data from the given request object and updates form attributes - the underlying model at this step remains unchanged. Next if runs defined validations and returns whether they succeed.\n\n### Data Synching\n\nAfter validation you can call `#save` (as in example above) and let FormObject take care of model persistence. Also you can use `#sync` to only write attributes from form to the resource and do everything else by your own.\n\n#### Custom Persistence Mechanism\n\nYou can define your own way of model persistence at the form level implementing own `#persist` method:\n\n```crystal\nclass PostForm < FormObject::Base(Post)\n  attr :title, String\n\n  def persist\n    resource.save\n    # some other logic goes here\n  end\nend\n```\n\n## Contributing\n\n1. Fork it (<https://github.com/imdrasil/form_object/fork>)\n2. Create your feature branch (`git checkout -b my-new-feature`)\n3. Commit your changes (`git commit -am 'Add some feature'`)\n4. Push to the branch (`git push origin my-new-feature`)\n5. Create a new Pull Request\n\n## Contributors\n\n> FormObject is heavily inspired by [reform](https://github.com/trailblazer/reform) ruby gem.\n\n- [imdrasil](https://github.com/imdrasil) Roman Kalnytskyi - creator, maintainer\n","program":{"html_id":"github.com/imdrasil/form_object/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"github.com/imdrasil/form_object","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/imdrasil/form_object/FormObject","path":"FormObject.html","kind":"module","full_name":"FormObject","name":"FormObject","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"form_object/exceptions.cr","line_number":1,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr"},{"filename":"form_object/mapping.cr","line_number":3,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/mapping.cr"},{"filename":"form_object/coercer.cr","line_number":1,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr"},{"filename":"form_object/i_context.cr","line_number":1,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr"},{"filename":"form_object/context_collection.cr","line_number":3,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr"},{"filename":"form_object/context.cr","line_number":4,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr"},{"filename":"form_object/abstract_form.cr","line_number":5,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr"},{"filename":"form_object/base.cr","line_number":3,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr"},{"filename":"form_object/module.cr","line_number":1,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/module.cr"},{"filename":"form_object.cr","line_number":11,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"VERSION","name":"VERSION","value":"\"0.2.0\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"local_time_zone-class-method","html_id":"local_time_zone-class-method","name":"local_time_zone","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object.cr#L14","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object.cr#L14","def":{"name":"local_time_zone","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Time::Location.local"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/imdrasil/form_object/FormObject/AbstractForm","path":"FormObject/AbstractForm.html","kind":"class","full_name":"FormObject::AbstractForm","name":"AbstractForm","abstract":true,"superclass":{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/imdrasil/form_object/FormObject/Mapping","kind":"module","full_name":"FormObject::Mapping","name":"Mapping"},{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/form_object/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"form_object/abstract_form.cr","line_number":12,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[{"html_id":"github.com/imdrasil/form_object/FormObject/Mapping","kind":"module","full_name":"FormObject::Mapping","name":"Mapping"}],"extended_modules":[{"html_id":"github.com/imdrasil/form_object/FormObject/AbstractForm/ClassMethods","kind":"module","full_name":"FormObject::AbstractForm::ClassMethods","name":"ClassMethods"}],"subclasses":[{"html_id":"github.com/imdrasil/form_object/FormObject/Base","kind":"class","full_name":"FormObject::Base(T)","name":"Base"}],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":"Base abstract form object class.\n\nWorks with any kind of object but needs some abstract methods implementation:\n\n- #persist\n- #valid?","summary":"<p>Base abstract form object class.</p>","class_methods":[{"id":"coercer-class-method","html_id":"coercer-class-method","name":"coercer","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L36","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L36","def":{"name":"coercer","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@coercer || (@@coercer = Coercer.new)"}},{"id":"go_deep_json(pull,context,depth=-1)-class-method","html_id":"go_deep_json(pull,context,depth=-1)-class-method","name":"go_deep_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""},{"name":"depth","doc":null,"default_value":"-1","external_name":"depth","restriction":""}],"args_string":"(pull, context, depth = <span class=\"n\">-1</span>)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L145","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L145","def":{"name":"go_deep_json","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""},{"name":"depth","doc":null,"default_value":"-1","external_name":"depth","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if match_json_path?(depth)\n  parse_json_object(pull, context)\nelse\n  key = current_json_key(depth)\n  pull.on_key(key) do\n    go_deep_json(pull, context, depth + 1)\n  end\nend"}},{"id":"parse(request)-class-method","html_id":"parse(request)-class-method","name":"parse","doc":null,"summary":null,"abstract":false,"args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""}],"args_string":"(request)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L89","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L89","def":{"name":"parse","args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"body = request.body\nif body\n  body.seek(0)\nend\ncontext = Context.new\nread_query_params(request, context)\ncase request.headers[\"Content-Type\"]?\nwhen /^application\\/x-www-form-urlencoded/\n  read_url_encoded_form(request, context)\nwhen /^multipart\\/form-data/\n  read_multipart_form(request, context)\nwhen /^application\\/json/\n  read_json_form(request, context)\nend\ncontext\n"}},{"id":"parse_json_array(pull,context_collection)-class-method","html_id":"parse_json_array(pull,context_collection)-class-method","name":"parse_json_array","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":""},{"name":"context_collection","doc":null,"default_value":"","external_name":"context_collection","restriction":""}],"args_string":"(pull, context_collection)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L160","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L160","def":{"name":"parse_json_array","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":""},{"name":"context_collection","doc":null,"default_value":"","external_name":"context_collection","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"pull.read_array do\n  context = context_collection.next_object\n  parse_json_object(pull, context)\nend"}},{"id":"parse_json_object(pull,context)-class-method","html_id":"parse_json_object(pull,context)-class-method","name":"parse_json_object","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"args_string":"(pull, context)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L154","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L154","def":{"name":"parse_json_object","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"pull.read_object do |field|\n  parse_json_parameter(field, pull, context)\nend"}},{"id":"read_json_form(request,context)-class-method","html_id":"read_json_form(request,context)-class-method","name":"read_json_form","doc":null,"summary":null,"abstract":false,"args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"args_string":"(request, context)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L133","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L133","def":{"name":"read_json_form","args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  body = request.body.to_s\n  pull = JSON::PullParser.new(body)\n  go_deep_json(pull, context)\nrescue JSON::ParseException\nend"}},{"id":"read_multipart_form(request,context)-class-method","html_id":"read_multipart_form(request,context)-class-method","name":"read_multipart_form","doc":null,"summary":null,"abstract":false,"args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"args_string":"(request, context)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L126","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L126","def":{"name":"read_multipart_form","args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if request.body.nil? || request.content_length.nil?\n  return\nend\nHTTP::FormData.parse(request) do |part|\n  parse_form_data_part(part.name, part, context)\nend\n"}},{"id":"read_query_params(request,context)-class-method","html_id":"read_query_params(request,context)-class-method","name":"read_query_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"args_string":"(request, context)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L113","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L113","def":{"name":"read_query_params","args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"HTTP::Params.parse((URI.parse(request.resource)).query || \"\") do |key, value|\n  parse_string_parameter(key, value, context)\nend"}},{"id":"read_url_encoded_form(request,context)-class-method","html_id":"read_url_encoded_form(request,context)-class-method","name":"read_url_encoded_form","doc":null,"summary":null,"abstract":false,"args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"args_string":"(request, context)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L119","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L119","def":{"name":"read_url_encoded_form","args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if request.body.nil? || request.content_length.nil?\n  return\nend\nHTTP::Params.parse(request.body.not_nil!.gets_to_end) do |key, value|\n  parse_string_parameter(key, value, context)\nend\n"}}],"constructors":[{"id":"new-class-method","html_id":"new-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L40","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L40","def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"assign_fields(context)-instance-method","html_id":"assign_fields(context)-instance-method","name":"assign_fields","doc":null,"summary":null,"abstract":true,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"args_string":"(context)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L34","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L34","def":{"name":"assign_fields","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"persist-instance-method","html_id":"persist-instance-method","name":"persist","doc":"Persists resource.","summary":"<p>Persists resource.</p>","abstract":true,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L32","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L32","def":{"name":"persist","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"save-instance-method","html_id":"save-instance-method","name":"save","doc":"Synchronizes attributes and persists resource.","summary":"<p>Synchronizes attributes and persists resource.</p>","abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L49","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L49","def":{"name":"save","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"sync\npersist\n"}},{"id":"skip-instance-method","html_id":"skip-instance-method","name":"skip","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L54","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L54","def":{"name":"skip","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"raise(SkipException.new)"}},{"id":"valid?-instance-method","html_id":"valid?-instance-method","name":"valid?","doc":"Returns whether form object is valid.","summary":"<p>Returns whether form object is valid.</p>","abstract":true,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L26","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L26","def":{"name":"valid?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"verify(request:HTTP::Request)-instance-method","html_id":"verify(request:HTTP::Request)-instance-method","name":"verify","doc":"Parses given request data, assigns them and validates.","summary":"<p>Parses given request data, assigns them and validates.</p>","abstract":false,"args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":"HTTP::Request"}],"args_string":"(request : HTTP::Request)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L44","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L44","def":{"name":"verify","args":[{"name":"request","doc":null,"default_value":"","external_name":"request","restriction":"HTTP::Request"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"parse(request)\nvalid?\n"}}],"macros":[],"types":[{"html_id":"github.com/imdrasil/form_object/FormObject/AbstractForm/ClassMethods","path":"FormObject/AbstractForm/ClassMethods.html","kind":"module","full_name":"FormObject::AbstractForm::ClassMethods","name":"ClassMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"form_object/abstract_form.cr","line_number":15,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject/AbstractForm","kind":"class","full_name":"FormObject::AbstractForm","name":"AbstractForm"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"parse_string_parameter(key,value,context)-instance-method","html_id":"parse_string_parameter(key,value,context)-instance-method","name":"parse_string_parameter","doc":null,"summary":null,"abstract":true,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"args_string":"(key, value, context)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L17","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/abstract_form.cr#L17","def":{"name":"parse_string_parameter","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""},{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}}],"macros":[],"types":[]}]},{"html_id":"github.com/imdrasil/form_object/FormObject/Base","path":"FormObject/Base.html","kind":"class","full_name":"FormObject::Base(T)","name":"Base","abstract":true,"superclass":{"html_id":"github.com/imdrasil/form_object/FormObject/AbstractForm","kind":"class","full_name":"FormObject::AbstractForm","name":"AbstractForm"},"ancestors":[{"html_id":"github.com/imdrasil/form_object/Jennifer/Model/Validation","kind":"module","full_name":"Jennifer::Model::Validation","name":"Validation"},{"html_id":"github.com/imdrasil/form_object/Jennifer/Validations/Macros","kind":"module","full_name":"Jennifer::Validations::Macros","name":"Macros"},{"html_id":"github.com/imdrasil/form_object/FormObject/AbstractForm","kind":"class","full_name":"FormObject::AbstractForm","name":"AbstractForm"},{"html_id":"github.com/imdrasil/form_object/FormObject/Mapping","kind":"module","full_name":"FormObject::Mapping","name":"Mapping"},{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/form_object/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"form_object/base.cr","line_number":33,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[{"html_id":"github.com/imdrasil/form_object/Jennifer/Model/Validation","kind":"module","full_name":"Jennifer::Model::Validation","name":"Validation"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":"Base class for Jennifer form object.\n\nThis class works only with Jennifer ORM.\n\n```\nclass ContactForm < FormObject::Base(Contact)\n  attr :name, String\n  attr :sex, String, origin: :gender\n  attr :count, Int32, virtual: true\n  attr :_deleted, Bool?, virtual: true\nend\n```\n\nFormObject::Base supports Jennifer validation DSL and API.\n\n```\nclass ContactForm < FormObject::Base(Contact)\n  # ...\n  attr :count, Int32, virtual: true\n\n  validates_numericality :count, greater_than: 2\nend\n\nc = Contact.new\nf = ContactForm.new(c)\nf.verify(request)\nf.valid?\nf.errors # Jennifer::Model::Errors\n```","summary":"<p>Base class for Jennifer form object.</p>","class_methods":[{"id":"all-class-method","html_id":"all-class-method","name":"all","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L59","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L59","def":{"name":"all","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"T.all"}},{"id":"human_attribute_name(attr)-class-method","html_id":"human_attribute_name(attr)-class-method","name":"human_attribute_name","doc":null,"summary":null,"abstract":false,"args":[{"name":"attr","doc":null,"default_value":"","external_name":"attr","restriction":""}],"args_string":"(attr)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L55","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L55","def":{"name":"human_attribute_name","args":[{"name":"attr","doc":null,"default_value":"","external_name":"attr","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"T.human_attribute_name(attr)"}}],"constructors":[{"id":"new(resource)-class-method","html_id":"new(resource)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"resource","doc":null,"default_value":"","external_name":"resource","restriction":""}],"args_string":"(resource)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L42","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L42","def":{"name":"new","args":[{"name":"resource","doc":null,"default_value":"","external_name":"resource","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = Base(T).allocate\n_.initialize(resource)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"changed?-instance-method","html_id":"changed?-instance-method","name":"changed?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L67","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L67","def":{"name":"changed?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"resource.changed?"}},{"id":"errors-instance-method","html_id":"errors-instance-method","name":"errors","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L36","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L36","def":{"name":"errors","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@errors || (@errors = Jennifer::Model::Errors.new(resource))"}},{"id":"new_record?-instance-method","html_id":"new_record?-instance-method","name":"new_record?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L63","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L63","def":{"name":"new_record?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"resource.new_record?"}},{"id":"persist-instance-method","html_id":"persist-instance-method","name":"persist","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L46","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L46","def":{"name":"persist","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"resource.save.tap do |state|\n  if state\n  else\n    next\n  end\n  persist_nested\nend"}},{"id":"persist_nested-instance-method","html_id":"persist_nested-instance-method","name":"persist_nested","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L53","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L53","def":{"name":"persist_nested","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"resource:T-instance-method","html_id":"resource:T-instance-method","name":"resource","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : T","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L40","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/base.cr#L40","def":{"name":"resource","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"T","visibility":"Public","body":"@resource"}}],"macros":[],"types":[]},{"html_id":"github.com/imdrasil/form_object/FormObject/BaseError","path":"FormObject/BaseError.html","kind":"class","full_name":"FormObject::BaseError","name":"BaseError","abstract":false,"superclass":{"html_id":"github.com/imdrasil/form_object/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"github.com/imdrasil/form_object/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/form_object/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"form_object/exceptions.cr","line_number":2,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"github.com/imdrasil/form_object/FormObject/NotAssignedError","kind":"class","full_name":"FormObject::NotAssignedError","name":"NotAssignedError"},{"html_id":"github.com/imdrasil/form_object/FormObject/TypeCastError","kind":"class","full_name":"FormObject::TypeCastError","name":"TypeCastError"}],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/imdrasil/form_object/FormObject/Coercer","path":"FormObject/Coercer.html","kind":"class","full_name":"FormObject::Coercer","name":"Coercer","abstract":false,"superclass":{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/form_object/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"form_object/coercer.cr","line_number":2,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"coerce(value:String,str_class:String)-instance-method","html_id":"coerce(value:String,str_class:String)-instance-method","name":"coerce","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"},{"name":"str_class","doc":null,"default_value":"","external_name":"str_class","restriction":"String"}],"args_string":"(value : String, str_class : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L3","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L3","def":{"name":"coerce","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"},{"name":"str_class","doc":null,"default_value":"","external_name":"str_class","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"case str_class\nwhen /String/\n  to_s(value)\nwhen /Int16/\n  to_i16(value)\nwhen /Int64/\n  to_i64(value)\nwhen /Int/\n  to_i(value)\nwhen /Float32/\n  to_f32(value)\nwhen /Float/\n  to_f(value)\nwhen /Bool/\n  to_b(value)\nwhen /JSON/\n  to_json(value)\nwhen /Time/\n  to_time(value)\nelse\n  raise(ArgumentError.new)\nend"}},{"id":"coerce(value:Nil,str_class:String)-instance-method","html_id":"coerce(value:Nil,str_class:String)-instance-method","name":"coerce","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Nil"},{"name":"str_class","doc":null,"default_value":"","external_name":"str_class","restriction":"String"}],"args_string":"(value : Nil, str_class : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L30","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L30","def":{"name":"coerce","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"Nil"},{"name":"str_class","doc":null,"default_value":"","external_name":"str_class","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"nil"}},{"id":"to_array(value:String,str_class:String)-instance-method","html_id":"to_array(value:String,str_class:String)-instance-method","name":"to_array","doc":"Converts single string array.\n\n```\ncoercer.to_array(\"[1]\", \"Array(Int32)\") # [1]\n```","summary":"<p>Converts single string array.</p>","abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"},{"name":"str_class","doc":null,"default_value":"","external_name":"str_class","restriction":"String"}],"args_string":"(value : String, str_class : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L84","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L84","def":{"name":"to_array","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"},{"name":"str_class","doc":null,"default_value":"","external_name":"str_class","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"array = (to_json(value)).as_a\ncase str_class\nwhen /Int32/\n  array.map(&.as_i)\nwhen /Float32/\n  array.map(&.as_f32)\nwhen /Float64/\n  array.map(&.as_f)\nwhen /Int16/\n  array.map do |__arg3|\n    __arg3.as_i.to_i16\n  end\nwhen /Int64/\n  array.map(&.as_i64)\nwhen /String/\n  array.map(&.as_s)\nelse\n  raise(ArgumentError.new)\nend\n"}},{"id":"to_b(value:String)-instance-method","html_id":"to_b(value:String)-instance-method","name":"to_b","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L66","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L66","def":{"name":"to_b","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"((value == \"true\") || (value == \"1\")) || (value == \"t\")"}},{"id":"to_f(value:String)-instance-method","html_id":"to_f(value:String)-instance-method","name":"to_f","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L58","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L58","def":{"name":"to_f","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"value.to_f"}},{"id":"to_f32(value:String)-instance-method","html_id":"to_f32(value:String)-instance-method","name":"to_f32","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L62","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L62","def":{"name":"to_f32","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"value.to_f32"}},{"id":"to_i(value:String)-instance-method","html_id":"to_i(value:String)-instance-method","name":"to_i","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L54","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L54","def":{"name":"to_i","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"value.to_i"}},{"id":"to_i16(value:String)-instance-method","html_id":"to_i16(value:String)-instance-method","name":"to_i16","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L46","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L46","def":{"name":"to_i16","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"value.to_i16"}},{"id":"to_i64(value:String)-instance-method","html_id":"to_i64(value:String)-instance-method","name":"to_i64","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L50","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L50","def":{"name":"to_i64","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"value.to_i64"}},{"id":"to_json(value:String)-instance-method","html_id":"to_json(value:String)-instance-method","name":"to_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L70","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L70","def":{"name":"to_json","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"JSON.parse(value)"}},{"id":"to_pr32(value:String)-instance-method","html_id":"to_pr32(value:String)-instance-method","name":"to_pr32","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L34","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L34","def":{"name":"to_pr32","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"to_i(value)"}},{"id":"to_pr64(value:String)-instance-method","html_id":"to_pr64(value:String)-instance-method","name":"to_pr64","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L38","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L38","def":{"name":"to_pr64","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"to_i64(value)"}},{"id":"to_s(value:String)-instance-method","html_id":"to_s(value:String)-instance-method","name":"to_s","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L42","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L42","def":{"name":"to_s","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"value"}},{"id":"to_time(value:String)-instance-method","html_id":"to_time(value:String)-instance-method","name":"to_time","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"args_string":"(value : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L74","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/coercer.cr#L74","def":{"name":"to_time","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"format = value =~ (/ /) ? \"%F %T\" : \"%F\"\nTime.parse(value, format, FormObject.local_time_zone)\n"}}],"macros":[],"types":[]},{"html_id":"github.com/imdrasil/form_object/FormObject/Context","path":"FormObject/Context.html","kind":"class","full_name":"FormObject::Context","name":"Context","abstract":false,"superclass":{"html_id":"github.com/imdrasil/form_object/FormObject/IContext","kind":"class","full_name":"FormObject::IContext","name":"IContext"},"ancestors":[{"html_id":"github.com/imdrasil/form_object/FormObject/IContext","kind":"class","full_name":"FormObject::IContext","name":"IContext"},{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/form_object/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"form_object/context_collection.cr","line_number":4,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr"},{"filename":"form_object/context.cr","line_number":5,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new-class-method","html_id":"new-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L10","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L10","def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"append_field(field,value:T)forallT-instance-method","html_id":"append_field(field,value:T)forallT-instance-method","name":"append_field","doc":null,"summary":null,"abstract":false,"args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"T"}],"args_string":"(field, value : T) forall T","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L40","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L40","def":{"name":"append_field","args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"T"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"__temp_77 = field\n__temp_78 = properties\n__temp_78[__temp_77]? || (__temp_78[__temp_77] = ([] of T).as(Any))\n(properties[field].as(Array(T))) << value\n"}},{"id":"clear-instance-method","html_id":"clear-instance-method","name":"clear","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L16","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L16","def":{"name":"clear","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@properties = {} of String => Any\n@objects = {} of String => Context\n@collections = {} of String => ContextCollection\n"}},{"id":"collection(name:String)-instance-method","html_id":"collection(name:String)-instance-method","name":"collection","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"args_string":"(name : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L53","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L53","def":{"name":"collection","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"__temp_81 = name\n@collections[__temp_81]? || (@collections[__temp_81] = ContextCollection.new)\n"}},{"id":"collections:Hash(String,ContextCollection)-instance-method","html_id":"collections:Hash(String,ContextCollection)-instance-method","name":"collections","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, ContextCollection)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L6","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L6","def":{"name":"collections","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, ContextCollection)","visibility":"Public","body":"@collections"}},{"id":"each_collection(&block)-instance-method","html_id":"each_collection(&amp;block)-instance-method","name":"each_collection","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(&block)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L34","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L34","def":{"name":"each_collection","args":[],"double_splat":null,"splat_index":null,"yields":2,"block_arg":null,"return_type":"","visibility":"Public","body":"@collections.each do |field, collection|\n  yield field, collection\nend"}},{"id":"each_field(&block)-instance-method","html_id":"each_field(&amp;block)-instance-method","name":"each_field","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(&block)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L22","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L22","def":{"name":"each_field","args":[],"double_splat":null,"splat_index":null,"yields":2,"block_arg":null,"return_type":"","visibility":"Public","body":"@properties.each do |field, value|\n  yield field, value\nend"}},{"id":"each_object(&block)-instance-method","html_id":"each_object(&amp;block)-instance-method","name":"each_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(&block)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L28","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L28","def":{"name":"each_object","args":[],"double_splat":null,"splat_index":null,"yields":2,"block_arg":null,"return_type":"","visibility":"Public","body":"@objects.each do |field, context|\n  yield field, context\nend"}},{"id":"object(name:String)-instance-method","html_id":"object(name:String)-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"args_string":"(name : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L49","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L49","def":{"name":"object","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"__temp_79 = name\n__temp_80 = objects\n__temp_80[__temp_79]? || (__temp_80[__temp_79] = Context.new)\n"}},{"id":"objects:Hash(String,Context)-instance-method","html_id":"objects:Hash(String,Context)-instance-method","name":"objects","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, Context)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L6","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L6","def":{"name":"objects","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, Context)","visibility":"Public","body":"@objects"}},{"id":"properties:Hash(String,Any)-instance-method","html_id":"properties:Hash(String,Any)-instance-method","name":"properties","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, Any)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L6","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L6","def":{"name":"properties","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Hash(String, Any)","visibility":"Public","body":"@properties"}},{"id":"set_field(field,value)-instance-method","html_id":"set_field(field,value)-instance-method","name":"set_field","doc":null,"summary":null,"abstract":false,"args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(field, value)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L45","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context.cr#L45","def":{"name":"set_field","args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"properties[field] = value.as(Any)"}}],"macros":[],"types":[]},{"html_id":"github.com/imdrasil/form_object/FormObject/ContextCollection","path":"FormObject/ContextCollection.html","kind":"class","full_name":"FormObject::ContextCollection","name":"ContextCollection","abstract":false,"superclass":{"html_id":"github.com/imdrasil/form_object/FormObject/IContext","kind":"class","full_name":"FormObject::IContext","name":"IContext"},"ancestors":[{"html_id":"github.com/imdrasil/form_object/FormObject/IContext","kind":"class","full_name":"FormObject::IContext","name":"IContext"},{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/form_object/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"form_object/context_collection.cr","line_number":6,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new-class-method","html_id":"new-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L11","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L11","def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"[](*args,**options)-instance-method","html_id":"[](*args,**options)-instance-method","name":"[]","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","def":{"name":"[]","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"bucket[*args, **options]"}},{"id":"[](*args,**options,&block)-instance-method","html_id":"[](*args,**options,&amp;block)-instance-method","name":"[]","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &block)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","def":{"name":"[]","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"bucket[*args, **options] do |*yield_args|\n  yield *yield_args\nend"}},{"id":"append_field(field,value:T)forallT-instance-method","html_id":"append_field(field,value:T)forallT-instance-method","name":"append_field","doc":null,"summary":null,"abstract":false,"args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"T"}],"args_string":"(field, value : T) forall T","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L35","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L35","def":{"name":"append_field","args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":"T"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"properties = (object_for(field)).properties[field]\n__temp_83 = field\nproperties[__temp_83]? || (properties[__temp_83] = ([] of T).as(Any))\n(properties[field].as(Array(T))) << value\n"}},{"id":"bucket:Array(FormObject::Context)-instance-method","html_id":"bucket:Array(FormObject::Context)-instance-method","name":"bucket","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(FormObject::Context)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L7","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L7","def":{"name":"bucket","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@bucket"}},{"id":"collection(name:String)-instance-method","html_id":"collection(name:String)-instance-method","name":"collection","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"args_string":"(name : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L49","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L49","def":{"name":"collection","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"__temp_87 = name\n__temp_88 = (object_for(field)).collections\n__temp_88[__temp_87]? || (__temp_88[__temp_87] = ContextCollection.new)\n"}},{"id":"current_object-instance-method","html_id":"current_object-instance-method","name":"current_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L16","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L16","def":{"name":"current_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @bucket.empty?\n  return next_object\nend\n@bucket.last\n"}},{"id":"each_context(&block)-instance-method","html_id":"each_context(&amp;block)-instance-method","name":"each_context","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(&block)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L53","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L53","def":{"name":"each_context","args":[],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@bucket.each do |context|\n  yield context\nend"}},{"id":"empty?(*args,**options)-instance-method","html_id":"empty?(*args,**options)-instance-method","name":"empty?","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","def":{"name":"empty?","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"bucket.empty?(*args, **options)"}},{"id":"empty?(*args,**options,&block)-instance-method","html_id":"empty?(*args,**options,&amp;block)-instance-method","name":"empty?","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &block)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","def":{"name":"empty?","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"bucket.empty?(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"next_object-instance-method","html_id":"next_object-instance-method","name":"next_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L21","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L21","def":{"name":"next_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@bucket << Context.new\n@bucket.last\n"}},{"id":"object(name:String)-instance-method","html_id":"object(name:String)-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"args_string":"(name : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L45","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L45","def":{"name":"object","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"__temp_85 = name\n__temp_86 = (object_for(field)).objects\n__temp_86[__temp_85]? || (__temp_86[__temp_85] = Context.new)\n"}},{"id":"object_for(field:String)-instance-method","html_id":"object_for(field:String)-instance-method","name":"object_for","doc":null,"summary":null,"abstract":false,"args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":"String"}],"args_string":"(field : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L26","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L26","def":{"name":"object_for","args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @fields.includes?(field)\n  @fields.clear\n  @bucket << Context.new\nend\n@fields << field\ncurrent_object\n"}},{"id":"set_field(field,value)-instance-method","html_id":"set_field(field,value)-instance-method","name":"set_field","doc":null,"summary":null,"abstract":false,"args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(field, value)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L41","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L41","def":{"name":"set_field","args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(object_for(field)).properties[field] = value.as(Any)"}},{"id":"size(*args,**options)-instance-method","html_id":"size(*args,**options)-instance-method","name":"size","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","def":{"name":"size","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"bucket.size(*args, **options)"}},{"id":"size(*args,**options,&block)-instance-method","html_id":"size(*args,**options,&amp;block)-instance-method","name":"size","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &block)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/context_collection.cr#L9","def":{"name":"size","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"bucket.size(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}}],"macros":[],"types":[]},{"html_id":"github.com/imdrasil/form_object/FormObject/IContext","path":"FormObject/IContext.html","kind":"class","full_name":"FormObject::IContext","name":"IContext","abstract":true,"superclass":{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/form_object/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"form_object/i_context.cr","line_number":2,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[{"html_id":"github.com/imdrasil/form_object/FormObject/Context","kind":"class","full_name":"FormObject::Context","name":"Context"},{"html_id":"github.com/imdrasil/form_object/FormObject/ContextCollection","kind":"class","full_name":"FormObject::ContextCollection","name":"ContextCollection"}],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"append_field(field,value)-instance-method","html_id":"append_field(field,value)-instance-method","name":"append_field","doc":null,"summary":null,"abstract":true,"args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(field, value)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr#L7","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr#L7","def":{"name":"append_field","args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"collection(name:String)-instance-method","html_id":"collection(name:String)-instance-method","name":"collection","doc":null,"summary":null,"abstract":true,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"args_string":"(name : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr#L13","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr#L13","def":{"name":"collection","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"object(name:String)-instance-method","html_id":"object(name:String)-instance-method","name":"object","doc":null,"summary":null,"abstract":true,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"args_string":"(name : String)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr#L11","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr#L11","def":{"name":"object","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}},{"id":"set_field(field,value)-instance-method","html_id":"set_field(field,value)-instance-method","name":"set_field","doc":null,"summary":null,"abstract":true,"args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(field, value)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr#L9","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr#L9","def":{"name":"set_field","args":[{"name":"field","doc":null,"default_value":"","external_name":"field","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":""}}],"macros":[],"types":[{"html_id":"github.com/imdrasil/form_object/FormObject/IContext/Any","path":"FormObject/IContext/Any.html","kind":"alias","full_name":"FormObject::IContext::Any","name":"Any","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"form_object/i_context.cr","line_number":3,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/i_context.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":true,"aliased":"(Array(Bool) | Array(Float32) | Array(Float64) | Array(Int16) | Array(Int32) | Array(Int64) | Array(Int8) | Array(JSON::Any) | Array(String) | Array(Time) | Bool | Float32 | Float64 | Int16 | Int32 | Int64 | Int8 | JSON::Any | String | Time)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject/IContext","kind":"class","full_name":"FormObject::IContext","name":"IContext"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"github.com/imdrasil/form_object/FormObject/Mapping","path":"FormObject/Mapping.html","kind":"module","full_name":"FormObject::Mapping","name":"Mapping","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"form_object/mapping.cr","line_number":4,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/mapping.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"github.com/imdrasil/form_object/FormObject/AbstractForm","kind":"class","full_name":"FormObject::AbstractForm","name":"AbstractForm"},{"html_id":"github.com/imdrasil/form_object/FormObject/Module","kind":"module","full_name":"FormObject::Module","name":"Module"}],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[{"id":"attr(name,type,origin=nil,virtual=false)-macro","html_id":"attr(name,type,origin=nil,virtual=false)-macro","name":"attr","doc":"Specifies attribute being parsed from a given request.\n\nOptions:\n* *name* - form object attribute name\n* *type* - attribute type; to define nilable field use `Type?` notation\n* *origin* - related model attribute name (by default it is *name*)\n* *virtual* - marks attribute as virtual - it will be retrieved and validated but no synchronized with model\n(`false` by default)\n\n```\nclass ContactForm < FormObject::Base(Contact)\n  attr :name, String\n  attr :sex, String, origin: :gender\n  attr :count, Int32, virtual: true\n  attr :_deleted, Bool?, virtual: true\nend\n```\n\nAny defined field of form object is defined as nilable. For a non-nil field `#attribute` method\nperforms `#not_nil!` check.\n\nDefines next methods for field with name `attribute`:\n\n* `#attribute!` - getter with `not_nil!` check for non-nil field\n* `#attribute` - getter without `not_nil!` check\n* `#append_attribute(String)` - coerces given value and adds to attribute (if it is an array)\n* `#attribute=(Type)` - setter\n* `#attribute=(String)` - coerces given value and sets to attribute","summary":"<p>Specifies attribute being parsed from a given request.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":""},{"name":"origin","doc":null,"default_value":"nil","external_name":"origin","restriction":""},{"name":"virtual","doc":null,"default_value":"false","external_name":"virtual","restriction":""}],"args_string":"(name, type, origin = nil, virtual = false)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/mapping.cr#L77","def":{"name":"attr","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":""},{"name":"origin","doc":null,"default_value":"nil","external_name":"origin","restriction":""},{"name":"virtual","doc":null,"default_value":"false","external_name":"virtual","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \n{% options = {type: type, origin: origin || name, virtual: virtual, stringified_type: type.stringify, null: false, array: false, defined: false, nested: false, save: true, populator: nil}\nif options[:type].is_a?(Generic)\n  type_name = options[:type].name.resolve\n  type_vars = options[:type].type_vars\n  if (type_name == Union) && (type_vars[1].resolve == Nil)\n    options[:null] = true\n  else\n    if type_name == Array\n      options[:array] = true\n    else\n      raise(\"Unions are not supported\")\n    end\n  end\n  options[:base_type] = type_vars[0].resolve\nelse\n  options[:base_type] = options[:type].resolve\nend\nMAPPING[name] = options\n %}\n\n\n      @\n{{ name.id }}\n : \n{{ options[:type] }}\n{{ unless options[:null]\n  \"?\".id\nend }}\n\n\n      def \n{{ name.id }}\n\n        @\n{{ name.id }}\n\n      \nend\n\n      def \n{{ name.id }}\n!\n        @\n{{ name.id }}\n{{ unless options[:null]\n  \".not_nil!\".id\nend }}\n\n      rescue \ne : Exception\n        raise FormObject::NotAssignedError.new(\n{{ name.id.stringify }}\n)\n      \nend\n\n      setter :\n{{ name.id }}\n\n\n      def \n{{ name.id }}\n=(value : String)\n        @\n{{ name.id }}\n = self.class.coerce_\n{{ name.id }}\n(value).as(\n{{ options[:type].id }}\n)\n      \nend\n    \n"}},{"id":"collection(name,klass,form_class=nil,origin=nil,save=true,populator=nil)-macro","html_id":"collection(name,klass,form_class=nil,origin=nil,save=true,populator=nil)-macro","name":"collection","doc":"Specifies relation collection being parsed from a given request.\n\nOptions:\n* *name* - nested form object name\n* *klass* - nested resource type\n* *form_class* - form object class for a resource; (by default is `\"#{klass.id}Form\".id`)\n* *origin* - related model relation name (by default is *name*)\n* *save* - whether related model should be persisted (by default is `true`)\n* *populator* - method name that will be used for object population.\n\n```\nclass ContactForm < FormObject::Base(Contact)\n  collection :addresses, Address, populator: :populate_address\n\n  def populate_address_collection(collection, index, **opts)\n    if collection[index]?\n      collection[index]\n    else\n      form = AddressForm.new(Address.new({contact_id: resource.id}))\n      addresses << form\n      form\n    end\n  end\nend\n```\n\nPopulator method is called for an object with following named tuple: `{collection: Array(ModelForm), context: FormObject::Context, index: Int32}.\nPopulator should return `ModelForm` object - this is required.\n\nDefines next methods for field with name `attribute`:\n\n* `#collection!` - same as `#collection`\n* `#collection` - getter without `not_nil!` check\n* `#collection=(Array(Model))` - wraps given model in `Array(ModelForm)`\n* `#collection=(Array(ModelForm))` - setter\n* `#add_collection(Model)` - adds given model to collection wrapping it into form object","summary":"<p>Specifies relation collection being parsed from a given request.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"klass","doc":null,"default_value":"","external_name":"klass","restriction":""},{"name":"form_class","doc":null,"default_value":"nil","external_name":"form_class","restriction":""},{"name":"origin","doc":null,"default_value":"nil","external_name":"origin","restriction":""},{"name":"save","doc":null,"default_value":"true","external_name":"save","restriction":""},{"name":"populator","doc":null,"default_value":"nil","external_name":"populator","restriction":""}],"args_string":"(name, klass, form_class = nil, origin = nil, save = true, populator = nil)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/mapping.cr#L237","def":{"name":"collection","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"klass","doc":null,"default_value":"","external_name":"klass","restriction":""},{"name":"form_class","doc":null,"default_value":"nil","external_name":"form_class","restriction":""},{"name":"origin","doc":null,"default_value":"nil","external_name":"origin","restriction":""},{"name":"save","doc":null,"default_value":"true","external_name":"save","restriction":""},{"name":"populator","doc":null,"default_value":"nil","external_name":"populator","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \n{% if form_class == nil\n  form_class = \"#{klass.id}Form\".id\nend %}\n\n\n      \n{% options = {type: form_class, origin: origin || name, virtual: true, stringified_type: form_class.stringify, null: false, array: true, defined: false, base_type: klass, nested: true, save: save, populator: populator}\nMAPPING[name] = options\n %}\n\n\n      @\n{{ name.id }}\n : Array(\n{{ form_class }}\n) = [] of \n{{ form_class }}\n\n\n      def \n{{ name.id }}\n\n        @\n{{ name.id }}\n\n      \nend\n\n      def \n{{ name.id }}\n!\n        @\n{{ name.id }}\n\n      \nend\n\n      setter :\n{{ name.id }}\n\n\n      def \n{{ name.id }}\n=(value : Array(\n{{ klass }}\n))\n        @\n{{ name.id }}\n.clear\n        value.each \n{ |v| @\n{{ name.id }}\n << \n{{ form_class }}\n.new(v) }\n      \nend\n\n      def add_\n{{ name.id }}\n(value : \n{{ klass }}\n)\n        @\n{{ name.id }}\n << \n{{ form_class }}\n.new(value)\n      \nend\n    \n"}},{"id":"json_path(value)-macro","html_id":"json_path(value)-macro","name":"json_path","doc":"Specifies path to the root of defined object.\n\n*value* - array of exact json keys.\n\n```\nclass AdditionalInfoForm < FormObject::Base(AdditionalInfo)\n  json_path %w(additionalInfo data)\n\n  # ...\nend\n```","summary":"<p>Specifies path to the root of defined object.</p>","abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(value)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/mapping.cr#L16","def":{"name":"json_path","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \n# :nodoc:\n\n      JSON_PATH = \n{{ value }}\n\n\n      private def self.match_json_path?(depth : Int)\n        depth + 1 == JSON_PATH.size\n      \nend\n\n      private def self.current_json_key(depth)\n        JSON_PATH[depth + 1]\n      \nend\n    \n"}},{"id":"object(name,klass,form_class=nil,origin=nil,save=true,populator=nil)-macro","html_id":"object(name,klass,form_class=nil,origin=nil,save=true,populator=nil)-macro","name":"object","doc":"Specifies nested object form being parsed from a given request.\n\nOptions:\n* *name* - nested form object name\n* *klass* - nested resource type\n* *form_class* - form object class for a resource; (by default is `\"#{klass.id}Form\".id`)\n* *origin* - related model relation name (by default is *name*)\n* *save* - whether related model should be persisted (by default is `true`)\n* *populator* - method name that will be used for object population.\n\n```\nclass ContactForm < FormObject::Base(Contact)\n  object :address, Address, populator: :populate_address\n\n  def populate_address(model, **opts)\n    model || Address.new\n  end\nend\n```\n\nAny defined nested object of form object is defined as nilable.\n\nPopulator method is called for the object with following named tuple: `{model: ModelForm?, context: FormObject::Context}.\nPopulator should return `ModelForm` object - this is required.\n\n> In the code snippet above described default populator that is generated if no populator is given.\n\nDefines next methods for field with name `attribute`:\n\n* `#object!` - getter with `not_nil!` check\n* `#object` - getter without `not_nil!` check\n* `#object=(Model)` - wraps given model in `ModelForm`\n* `#object=(ModelForm)` - setter","summary":"<p>Specifies nested object form being parsed from a given request.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"klass","doc":null,"default_value":"","external_name":"klass","restriction":""},{"name":"form_class","doc":null,"default_value":"nil","external_name":"form_class","restriction":""},{"name":"origin","doc":null,"default_value":"nil","external_name":"origin","restriction":""},{"name":"save","doc":null,"default_value":"true","external_name":"save","restriction":""},{"name":"populator","doc":null,"default_value":"nil","external_name":"populator","restriction":""}],"args_string":"(name, klass, form_class = nil, origin = nil, save = true, populator = nil)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/mapping.cr#L161","def":{"name":"object","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"klass","doc":null,"default_value":"","external_name":"klass","restriction":""},{"name":"form_class","doc":null,"default_value":"nil","external_name":"form_class","restriction":""},{"name":"origin","doc":null,"default_value":"nil","external_name":"origin","restriction":""},{"name":"save","doc":null,"default_value":"true","external_name":"save","restriction":""},{"name":"populator","doc":null,"default_value":"nil","external_name":"populator","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \n{% if form_class == nil\n  form_class = \"#{klass.id}Form\".id\nend %}\n\n\n      \n{% options = {type: form_class, origin: origin || name, virtual: true, stringified_type: form_class.stringify, null: true, array: false, defined: false, base_type: klass, nested: true, save: save, populator: populator}\nMAPPING[name] = options\n %}\n\n\n      @\n{{ name.id }}\n : \n{{ options[:type] }}\n?\n\n      def \n{{ name.id }}\n\n        @\n{{ name.id }}\n\n      \nend\n\n      def \n{{ name.id }}\n!\n        @\n{{ name.id }}\n.not_nil!\n      rescue \ne : Exception\n        raise FormObject::NotAssignedError.new(\n{{ name.id.stringify }}\n)\n      \nend\n\n      setter :\n{{ name.id }}\n\n\n      def \n{{ name.id }}\n=(value : \n{{ klass }}\n)\n        @\n{{ name.id }}\n = \n{{ form_class }}\n.new(value)\n      \nend\n    \n"}},{"id":"path(value)-macro","html_id":"path(value)-macro","name":"path","doc":"Specifies the root name for the form data or URL parameters.\n\n*value* - string representation of root name; if it is not specified all fields will\nbe retrieved from the root scope.\n\n```\nclass AdditionalInfoForm < FormObject::Base(AdditionalInfo)\n  path \"additional_info[data]\"\n\n  # ...\nend\n```","summary":"<p>Specifies the root name for the form data or URL parameters.</p>","abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(value)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/mapping.cr#L41","def":{"name":"path","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      private def self.match_root(scanner)\n        root = Regex.new(Regex.escape(\"\n{{ value.id }}\n\"))\n        return if scanner.scan(root).nil?\n        1\n      \nend\n    \n"}}],"types":[]},{"html_id":"github.com/imdrasil/form_object/FormObject/Module","path":"FormObject/Module.html","kind":"module","full_name":"FormObject::Module","name":"Module","abstract":false,"superclass":null,"ancestors":[{"html_id":"github.com/imdrasil/form_object/FormObject/Mapping","kind":"module","full_name":"FormObject::Mapping","name":"Mapping"}],"locations":[{"filename":"form_object/module.cr","line_number":34,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/module.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[{"html_id":"github.com/imdrasil/form_object/FormObject/Mapping","kind":"module","full_name":"FormObject::Mapping","name":"Mapping"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":"Base form object module.\n\nInclude this in the first module that gets further included.\n\n```\nmodule ContactName\n  include FormObject::Module\n\n  attr :name, String\nend\n\nmodule ContactGender\n  include FormObject::Module\n\n  attr :sex, String, origin: :gender\nend\n\nmodule ContactFields\n  include ContactName\n  include ContactGender\n\n  attr :count, Int32, virtual: true\nend\n\nclass ContactWithModule < FormObject::Base(Contact)\n  include ContactFields\n\n  attr :age, Int32?\nend\n```\n\nOnly attribute definition is supported in shared modules.","summary":"<p>Base form object module.</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/imdrasil/form_object/FormObject/NotAssignedError","path":"FormObject/NotAssignedError.html","kind":"class","full_name":"FormObject::NotAssignedError","name":"NotAssignedError","abstract":false,"superclass":{"html_id":"github.com/imdrasil/form_object/FormObject/BaseError","kind":"class","full_name":"FormObject::BaseError","name":"BaseError"},"ancestors":[{"html_id":"github.com/imdrasil/form_object/FormObject/BaseError","kind":"class","full_name":"FormObject::BaseError","name":"BaseError"},{"html_id":"github.com/imdrasil/form_object/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/form_object/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"form_object/exceptions.cr","line_number":13,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(value)-class-method","html_id":"new(value)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(value)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr#L14","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr#L14","def":{"name":"new","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(value)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/imdrasil/form_object/FormObject/SkipException","path":"FormObject/SkipException.html","kind":"class","full_name":"FormObject::SkipException","name":"SkipException","abstract":false,"superclass":{"html_id":"github.com/imdrasil/form_object/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"github.com/imdrasil/form_object/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/form_object/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"form_object/exceptions.cr","line_number":19,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/imdrasil/form_object/FormObject/TypeCastError","path":"FormObject/TypeCastError.html","kind":"class","full_name":"FormObject::TypeCastError","name":"TypeCastError","abstract":false,"superclass":{"html_id":"github.com/imdrasil/form_object/FormObject/BaseError","kind":"class","full_name":"FormObject::BaseError","name":"BaseError"},"ancestors":[{"html_id":"github.com/imdrasil/form_object/FormObject/BaseError","kind":"class","full_name":"FormObject::BaseError","name":"BaseError"},{"html_id":"github.com/imdrasil/form_object/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"github.com/imdrasil/form_object/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/form_object/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"form_object/exceptions.cr","line_number":5,"url":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr"}],"repository_name":"github.com/imdrasil/form_object","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/form_object/FormObject","kind":"module","full_name":"FormObject","name":"FormObject"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(value,name,source,target)-class-method","html_id":"new(value,name,source,target)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"source","doc":null,"default_value":"","external_name":"source","restriction":""},{"name":"target","doc":null,"default_value":"","external_name":"target","restriction":""}],"args_string":"(value, name, source, target)","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr#L8","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr#L8","def":{"name":"new","args":[{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"source","doc":null,"default_value":"","external_name":"source","restriction":""},{"name":"target","doc":null,"default_value":"","external_name":"target","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(value, name, source, target)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"name:String-instance-method","html_id":"name:String-instance-method","name":"name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr#L6","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr#L6","def":{"name":"name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@name"}},{"id":"source:String-instance-method","html_id":"source:String-instance-method","name":"source","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr#L6","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr#L6","def":{"name":"source","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@source"}},{"id":"target:String-instance-method","html_id":"target:String-instance-method","name":"target","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr#L6","source_link":"https://github.com/imdrasil/form_object/blob/53707fa4262ad44d72a23459c37a0251c42f7a1b/src/form_object/exceptions.cr#L6","def":{"name":"target","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@target"}}],"macros":[],"types":[]}]}]}})