crystal_doc_search_index_callback({"repository_name":"github.com/imdrasil/sam.cr","body":"# Sam [![Build Status](https://travis-ci.org/imdrasil/sam.cr.svg)](https://travis-ci.org/imdrasil/sam.cr) [![Latest Release](https://img.shields.io/github/release/imdrasil/sam.cr.svg)](https://github.com/imdrasil/sam.cr/releases)\n\nSam is a Make-like utility which allows to specify tasks like Ruby's Rake do using plain Crystal.\n\n## Installation\n\nAdd this to your application's `shard.yml`:\n\n```yaml\ndependencies:\n  sam:\n    github: imdrasil/sam.cr\n```\n\n## Usage\n\n### Simple example\n\nCreate `sam.cr` file in your app root directory and paste next:\n\n```crystal\n# here you should load your app configuration if\n# it will be needed to perform tasks\nSam.namespace \"db\" do\n  namespace \"schema\" do\n    desc \"Outputs smth: requires 2 named arguments\"\n    task \"load\" do |t, args|\n      puts args[\"f1\"]\n      t.invoke(\"1\")\n      t.invoke(\"schema:1\")\n      t.invoke(\"db:migrate\")\n      t.invoke(\"db:db:migrate\")\n      t.invoke(\"db:ping\")\n      t.invoke(\"din:dong\")\n      puts \"------\"\n      t.invoke(\"2\", {\"f2\" => 1})\n    end\n\n    task \"1\" do\n      puts \"1\"\n    end\n\n    task \"2\", [\"1\", \"db:migrate\"] do |t, args|\n      puts args.named[\"f2\"].as(Int32) + 3\n    end\n  end\n\n  namespace \"db\" do\n    task \"schema\" do\n        puts \"same as namespace\"\n    end\n\n    task \"migrate\" do\n      puts \"migrate\"\n    end\n  end\n\n  task \"ping\" do\n    puts \"ping\"\n  end\nend\nSam.help\n```\n\nTo ran any of this task open prompt in root location and paste:\n\n```shell\n$ crystal sam.cr -- <your_task_path> [options]\n```\n\nTo get list of all available tasks:\n\n```shell\n$ crystal sam.cr -- help\n```\n\nEach tasks has own \"path\" which consists of namespace names and task name joined together by \":\".\n\nAlso tasks can accept space separated arguments from prompt. To pass named argument (which have associated name) use next rules:\n\n- `-name value`\n- `-name \"value with spaces\"`\n- `name=value`\n- `name=\"value with spaces\"`\n\nAlso just array of arguments can be passed - just past everything needed without any flags anywhere:\n\n```shell\n$ crystal sam.cr -- <your_task_path> first_raw_option \"options with spaces\"\n```\n\nAll arguments from prompt will be realized as `String`.\n\nTo invoke a task, e.g. the first task \"load\" from example above:\n\n```shell\ncrystal sam.cr -- db:schema:load -f1 asd\n```\n\nMakefile-like usage is supported. To autogenerate receipt just call\n\n```shell\n$ crystal sam.cr -- generate:makefile\n```\n\nThis will modify existing Makefile or creates new one. Be careful - this will silent all nonexisting tasks. For more details take a look on template in code. This will allow to call tasks in the next way:\n\n```shell\n$ make sam some:task raw_arg1\n```\n\nBut for named argument you need to add `--`\n\n```shell\n$ make sam db:schema:load -- -f1 asd\n```\n\nBy default it will try to use your samfile in the app root. To override it pass proper way as second argument\n\n```shell\n$ crystal src/sam.cr -- generate:makefile \"src/sam.cr\"\n```\n\nTo autoload Sam files from your dependencies - just past\n\n```crystal\nload_dependencies \"dep1\", \"dep2\"`\n```\n\nIf library provides some optional files with tasks they could be loaded as well using named tuple  literal:\n\n```crystal\nload_dependencies \"lib1\", \"lib2\": \"special_file\", \"lib3\": [\"special_file\"], \"lib3\": [\"/root_special_file\"]\n```\n\nBy default any nested dependency will be loaded from \"tasks\" folder at the lib root level. Any dependency with leading \"/\" makes to load them using given path. So `root_special_file` for `lib3` will be loaded with `lib3/src/lib3/root_special_file.cr`.\n\nTo execute multiple tasks at once just list them separated by `@` character:\n\n```shell\n$ crystal sam.cr -- namespace1:task1 arg1=2 @ other_task arg1=3\n```\n\nEach task will be executed only if the previous one is successfully finished (without throwing any exception).\n\n#### Namespace\n\nTo define namespace (for now they only used for namespacing tasks) use `Sam.namespace` (opens `root` namespace) or just `namespace` inside of it. `Sam.namespace` can be called any times - everything will be added to existing staff.\n\n#### Task\n\nTo define task use `task` method with it's name and block. Given block could take 0..2 arguments: `Task` object and `Args` object. Also as second parameter could be provided array of dependent tasks which will be invoked before current.\n\nAnother task could be invoked from current using `invoke` method. It has next signatures:\n\n-\n  - `name : String` - task path\n\n-\n  - `name : String` - task path\n  - `args : Args` - prepared argument object\n\n-\n  - `name : String` - task path\n  - `hash : Hash(String, String | Int32, Float32)` - hash with arguments\n\n-\n  - `name : String` - task path\n  - `args : Tuple` - raw arguments\n\nAny already invoked task is ignored during further invocations. To avoid this `#execute` method could be used.\n\n#### Routing\n\nWhen task is invoked from other one provided path will float up through current task namespace nesting and search given path on each level. Task could have same name as any existing namespace.\n\n#### Args\n\nThis class represents argument set for task. It can handle named arguments and just raw array of arguments. Now it supports only `String`, `Int32` and `Float64` types. To get access to named argument you can use `[](name : String)` and `[]?(name : String)` methods. For raw attributes there are `[](index : Int32)` and `[]?(index : Int32)` as well.\n\n## Development\n\nBefore running tests call\n\n```shell\n$ crystal examples/sam.cr -- setup\n```\n\n## Contributing\n\n1. [Fork it]( https://github.com/imdrasil/sam.cr/fork )\n2. Create your feature branch (git checkout -b my-new-feature)\n3. Commit your changes (git commit -am 'Add some feature')\n4. Push to the branch (git push origin my-new-feature)\n5. Create a new Pull Request\n\n## Contributors\n\n- [imdrasil](https://github.com/imdrasil/sam.cr) Roman Kalnytskyi - creator, maintainer\n","program":{"html_id":"github.com/imdrasil/sam.cr/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"github.com/imdrasil/sam.cr","program":true,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[{"id":"load_dependencies(*libraries)-macro","html_id":"load_dependencies(*libraries)-macro","name":"load_dependencies","doc":null,"summary":null,"abstract":false,"args":[{"name":"libraries","doc":null,"default_value":"","external_name":"libraries","restriction":""}],"args_string":"(*libraries)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L127","def":{"name":"load_dependencies","args":[{"name":"libraries","doc":null,"default_value":"","external_name":"libraries","restriction":""}],"double_splat":null,"splat_index":0,"block_arg":null,"visibility":"Public","body":"  \n{% for l in libraries %}\n    require \"{{ l.id }}/sam\"\n  {% end %}\n\n\n"}},{"id":"load_dependencies(*libraries,**dependencies)-macro","html_id":"load_dependencies(*libraries,**dependencies)-macro","name":"load_dependencies","doc":null,"summary":null,"abstract":false,"args":[{"name":"libraries","doc":null,"default_value":"","external_name":"libraries","restriction":""}],"args_string":"(*libraries, **dependencies)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L133","def":{"name":"load_dependencies","args":[{"name":"libraries","doc":null,"default_value":"","external_name":"libraries","restriction":""}],"double_splat":{"name":"dependencies","doc":null,"default_value":"","external_name":"dependencies","restriction":""},"splat_index":0,"block_arg":null,"visibility":"Public","body":"  \n{% for l in libraries %}\n    require \"{{ home_path.id }}/lib/{{ l.id }}/src/sam\"\n  {% end %}\n\n\n  \n{% for l, deps in dependencies %}\n    require \"{{ l.id }}/sam\"\n\n    {% if deps.is_a?(StringLiteral) %}\n      {% prefix = deps.starts_with?(\"/\") ? \"\" : \"/tasks/\" %}\n      require \"{{ l.id }}{{ prefix.id }}{{ deps.id }}\"\n    {% else %}\n      {% for dep in deps %}\n        {% prefix = dep.starts_with?(\"/\") ? \"\" : \"/tasks/\" %}\n        require \"{{ l.id }}{{ prefix.id }}{{ dep.id }}\"\n      {% end %}\n    {% end %}\n  {% end %}\n\n\n"}}],"types":[{"html_id":"github.com/imdrasil/sam.cr/Sam","path":"Sam.html","kind":"module","full_name":"Sam","name":"Sam","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"sam/args.cr","line_number":1,"url":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr"},{"filename":"sam/namespace.cr","line_number":1,"url":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr"},{"filename":"sam/task.cr","line_number":1,"url":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr"},{"filename":"sam/version.cr","line_number":1,"url":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/version.cr"},{"filename":"sam.cr","line_number":3,"url":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr"}],"repository_name":"github.com/imdrasil/sam.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[{"id":"TASK_SEPARATOR","name":"TASK_SEPARATOR","value":"\"@\"","doc":null,"summary":null},{"id":"VERSION","name":"VERSION","value":"\"0.3.0\"","doc":null,"summary":null}],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"desc(description)-class-method","html_id":"desc(description)-class-method","name":"desc","doc":null,"summary":null,"abstract":false,"args":[{"name":"description","doc":null,"default_value":"","external_name":"description","restriction":""}],"args_string":"(description)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L13","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L13","def":{"name":"desc","args":[{"name":"description","doc":null,"default_value":"","external_name":"description","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@root_namespace.desc(description)"}},{"id":"find(path)-class-method","html_id":"find(path)-class-method","name":"find","doc":null,"summary":null,"abstract":false,"args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":""}],"args_string":"(path)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L44","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L44","def":{"name":"find","args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@root_namespace.find(path)"}},{"id":"find!(path)-class-method","html_id":"find!(path)-class-method","name":"find!","doc":null,"summary":null,"abstract":false,"args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":""}],"args_string":"(path)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L48","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L48","def":{"name":"find!","args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(@@root_namespace.find(path)).not_nil!"}},{"id":"generate_makefile(sam_path)-class-method","html_id":"generate_makefile(sam_path)-class-method","name":"generate_makefile","doc":null,"summary":null,"abstract":false,"args":[{"name":"sam_path","doc":null,"default_value":"","external_name":"sam_path","restriction":""}],"args_string":"(sam_path)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L91","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L91","def":{"name":"generate_makefile","args":[{"name":"sam_path","doc":null,"default_value":"","external_name":"sam_path","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"shortcut_line = \"# === Sam shortcut\"\ndeclaration = \"#{shortcut_line}\\n# next lines are autogenerated and any changes will be discarded after regenerating\\nCRYSTAL_BIN ?= `which crystal`\\nSAM_PATH ?= \\\"#{sam_path}\\\"\\n.PHONY: sam\\nsam:\\n\\t$(CRYSTAL_BIN) run $(SAM_PATH) -- $(filter-out $@,$(MAKECMDGOALS))\\n%:\\n\\t@:\\n#{shortcut_line}\\n\"\nfile_path = \"Makefile\"\nif File.exists?(file_path)\n  ignore = false\n  shortcut = false\n  content = String.build do |io|\n    (File.read_lines(file_path)).each do |line|\n      if line.starts_with?(shortcut_line)\n        shortcut = true\n        ignore = !ignore\n        next\n      end\n      if ignore\n      else\n        (io << line) << \"\\n\"\n      end\n    end\n    io << declaration\n  end\n  File.write(file_path, content)\nelse\n  File.write(file_path, declaration)\nend\n"}},{"id":"help-class-method","html_id":"help-class-method","name":"help","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L52","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L52","def":{"name":"help","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  if ARGV.size > 0\n    process_tasks(ARGV)\n  else\n    puts(\"Hm, nothing to do...\")\n  end\nrescue e\n  puts(e.backtrace.join(\"\\n\"))\n  puts(e)\n  exit(1)\nend"}},{"id":"invoke(name,args:Args)-class-method","html_id":"invoke(name,args:Args)-class-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Args"}],"args_string":"(name, args : Args)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L26","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L26","def":{"name":"invoke","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Args"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"t = find(name)\nif t\n  t.not_nil!.call(args)\nelse\n  raise(\"Task #{name} was not found\")\nend\n"}},{"id":"invoke(name,args:Array(String))-class-method","html_id":"invoke(name,args:Array(String))-class-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Array(String)"}],"args_string":"(name, args : Array(String))","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L35","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L35","def":{"name":"invoke","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Array(String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"t = find(name)\nif t\n  t.not_nil!.call(Args.new(args))\nelse\n  raise(\"Task #{name} was not found\")\nend\n"}},{"id":"invoke(name)-class-method","html_id":"invoke(name)-class-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"args_string":"(name)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L22","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L22","def":{"name":"invoke","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"invoke(name, Args.new)"}},{"id":"namespace(name:String,&block)-class-method","html_id":"namespace(name:String,&amp;block)-class-method","name":"namespace","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"args_string":"(name : String, &block)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L8","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L8","def":{"name":"namespace","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"n = @@root_namespace.touch_namespace(name)\nwith n yield\n"}},{"id":"pretty_print-class-method","html_id":"pretty_print-class-method","name":"pretty_print","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L79","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L79","def":{"name":"pretty_print","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"descs = [] of String\ntasks = @@root_namespace.all_tasks\npaths = tasks.map(&.path)\nmax_length = paths.map(&.size).max\nputs(\"Tasks:\")\nputs(((\"-\" * (max_length + 2)) + \":\") + (\"-\" * 20))\ntasks.each_with_index do |task, i|\n  puts((paths[i].ljust(max_length + 5)) + task.description)\nend\n"}},{"id":"process_tasks(args)-class-method","html_id":"process_tasks(args)-class-method","name":"process_tasks","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(args)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L64","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L64","def":{"name":"process_tasks","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"separator_indexes = args.map_with_index do |a, i|\n  if a == TASK_SEPARATOR\n    i\n  end\nend.compact\nsets = [] of Array(String)\nprevious_index = 0\nseparator_indexes.each do |i|\n  sets << args[previous_index...i]\n  previous_index = i + 1\nend\nsets << args[previous_index..-1]\nsets.each do |set|\n  Sam.invoke(set[0], set[1..-1])\nend\n"}},{"id":"task(name,dependencies=[]ofString,&block:Task,Args->Void)-class-method","html_id":"task(name,dependencies=[]ofString,&amp;block:Task,Args-&gt;Void)-class-method","name":"task","doc":"delegates call to root namespace","summary":"<p>delegates call to root namespace</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"dependencies","doc":null,"default_value":"[] of String","external_name":"dependencies","restriction":""}],"args_string":"(name, dependencies = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>, &block : Task, Args -> Void)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L18","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam.cr#L18","def":{"name":"task","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"dependencies","doc":null,"default_value":"[] of String","external_name":"dependencies","restriction":""}],"double_splat":null,"splat_index":null,"yields":2,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(Task, Args -> Void)"},"return_type":"","visibility":"Public","body":"@@root_namespace.task(name, dependencies, &block)"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"github.com/imdrasil/sam.cr/Sam/Args","path":"Sam/Args.html","kind":"class","full_name":"Sam::Args","name":"Args","abstract":false,"superclass":{"html_id":"github.com/imdrasil/sam.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/imdrasil/sam.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/sam.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"sam/args.cr","line_number":2,"url":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr"}],"repository_name":"github.com/imdrasil/sam.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/sam.cr/Sam","kind":"module","full_name":"Sam","name":"Sam"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(args:Array(String))-class-method","html_id":"new(args:Array(String))-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Array(String)"}],"args_string":"(args : Array(String))","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L12","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L12","def":{"name":"new","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Array(String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(args)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(_named_args:ALLOWED_HASH,_arr=[]ofALLOWED_TYPES)-class-method","html_id":"new(_named_args:ALLOWED_HASH,_arr=[]ofALLOWED_TYPES)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"_named_args","doc":null,"default_value":"","external_name":"_named_args","restriction":"ALLOWED_HASH"},{"name":"_arr","doc":null,"default_value":"[] of ALLOWED_TYPES","external_name":"_arr","restriction":""}],"args_string":"(_named_args : ALLOWED_HASH, _arr = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">ALLOWED_TYPES</span>)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L16","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L16","def":{"name":"new","args":[{"name":"_named_args","doc":null,"default_value":"","external_name":"_named_args","restriction":"ALLOWED_HASH"},{"name":"_arr","doc":null,"default_value":"[] of ALLOWED_TYPES","external_name":"_arr","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(_named_args, _arr)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new-class-method","html_id":"new-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L9","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L9","def":{"name":"new","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"[](index:Int32)-instance-method","html_id":"[](index:Int32)-instance-method","name":"[]","doc":null,"summary":null,"abstract":false,"args":[{"name":"index","doc":null,"default_value":"","external_name":"index","restriction":"Int32"}],"args_string":"(index : Int32)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L35","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L35","def":{"name":"[]","args":[{"name":"index","doc":null,"default_value":"","external_name":"index","restriction":"Int32"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  @arr[index]\nrescue e\n  raise(ArgumentError.new(\"Missing argument with index #{index}\"))\nend"}},{"id":"[](name:String|Symbol)-instance-method","html_id":"[](name:String|Symbol)-instance-method","name":"[]","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String | Symbol"}],"args_string":"(name : String | Symbol)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L41","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L41","def":{"name":"[]","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String | Symbol"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  @named_args[name.to_s]\nrescue e\n  raise(ArgumentError.new(\"Missing argument with name #{name}\"))\nend"}},{"id":"[]?(index:Int32):ALLOWED_TYPES?-instance-method","html_id":"[]?(index:Int32):ALLOWED_TYPES?-instance-method","name":"[]?","doc":null,"summary":null,"abstract":false,"args":[{"name":"index","doc":null,"default_value":"","external_name":"index","restriction":"Int32"}],"args_string":"(index : Int32) : ALLOWED_TYPES?","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L47","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L47","def":{"name":"[]?","args":[{"name":"index","doc":null,"default_value":"","external_name":"index","restriction":"Int32"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ALLOWED_TYPES | Nil","visibility":"Public","body":"@arr[index]?"}},{"id":"[]?(name:String|Symbol):ALLOWED_TYPES?-instance-method","html_id":"[]?(name:String|Symbol):ALLOWED_TYPES?-instance-method","name":"[]?","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String | Symbol"}],"args_string":"(name : String | Symbol) : ALLOWED_TYPES?","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L51","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L51","def":{"name":"[]?","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String | Symbol"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ALLOWED_TYPES | Nil","visibility":"Public","body":"@named_args[name.to_s]?"}},{"id":"named:Hash(String,Float64|Int32|String)-instance-method","html_id":"named:Hash(String,Float64|Int32|String)-instance-method","name":"named","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Hash(String, Float64 | Int32 | String)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L27","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L27","def":{"name":"named","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@named_args"}},{"id":"raw:Array(Float64|Int32|String)-instance-method","html_id":"raw:Array(Float64|Int32|String)-instance-method","name":"raw","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Float64 | Int32 | String)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L23","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L23","def":{"name":"raw","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@arr"}},{"id":"size-instance-method","html_id":"size-instance-method","name":"size","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L31","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr#L31","def":{"name":"size","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@arr.size + @named_args.size"}}],"macros":[],"types":[{"html_id":"github.com/imdrasil/sam.cr/Sam/Args/ALLOWED_HASH","path":"Sam/Args/ALLOWED_HASH.html","kind":"alias","full_name":"Sam::Args::ALLOWED_HASH","name":"ALLOWED_HASH","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"sam/args.cr","line_number":3,"url":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr"}],"repository_name":"github.com/imdrasil/sam.cr","program":false,"enum":false,"alias":true,"aliased":"Hash(String, Float64 | Int32 | String)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/sam.cr/Sam/Args","kind":"class","full_name":"Sam::Args","name":"Args"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"github.com/imdrasil/sam.cr/Sam/Args/ALLOWED_TYPES","path":"Sam/Args/ALLOWED_TYPES.html","kind":"alias","full_name":"Sam::Args::ALLOWED_TYPES","name":"ALLOWED_TYPES","abstract":false,"superclass":null,"ancestors":[],"locations":[{"filename":"sam/args.cr","line_number":4,"url":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/args.cr"}],"repository_name":"github.com/imdrasil/sam.cr","program":false,"enum":false,"alias":true,"aliased":"(Float64 | Int32 | String)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/sam.cr/Sam/Args","kind":"class","full_name":"Sam::Args","name":"Args"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"github.com/imdrasil/sam.cr/Sam/Namespace","path":"Sam/Namespace.html","kind":"class","full_name":"Sam::Namespace","name":"Namespace","abstract":false,"superclass":{"html_id":"github.com/imdrasil/sam.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/imdrasil/sam.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/sam.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"sam/namespace.cr","line_number":2,"url":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr"}],"repository_name":"github.com/imdrasil/sam.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/sam.cr/Sam","kind":"module","full_name":"Sam","name":"Sam"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(name,parent)-class-method","html_id":"new(name,parent)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"parent","doc":null,"default_value":"","external_name":"parent","restriction":""}],"args_string":"(name, parent)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L9","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L9","def":{"name":"new","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"parent","doc":null,"default_value":"","external_name":"parent","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(name, parent)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"all_tasks-instance-method","html_id":"all_tasks-instance-method","name":"all_tasks","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L51","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L51","def":{"name":"all_tasks","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"tasks = @tasks.values\n@namespaces.each do |name, n|\n  tasks = tasks + n.all_tasks\nend\ntasks\n"}},{"id":"desc(description:String)-instance-method","html_id":"desc(description:String)-instance-method","name":"desc","doc":"Sets description to the next defined task.","summary":"<p>Sets description to the next defined task.</p>","abstract":false,"args":[{"name":"description","doc":null,"default_value":"","external_name":"description","restriction":"String"}],"args_string":"(description : String)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L22","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L22","def":{"name":"desc","args":[{"name":"description","doc":null,"default_value":"","external_name":"description","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@description = description"}},{"id":"find(path:String)-instance-method","html_id":"find(path:String)-instance-method","name":"find","doc":null,"summary":null,"abstract":false,"args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"}],"args_string":"(path : String)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L57","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L57","def":{"name":"find","args":[{"name":"path","doc":null,"default_value":"","external_name":"path","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if path.empty?\n  raise(ArgumentError.new(\"Path can't be empty\"))\nend\nfind(path.split(\":\"))\n"}},{"id":"name:String-instance-method","html_id":"name:String-instance-method","name":"name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L3","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L3","def":{"name":"name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@name"}},{"id":"namespace(name,&block)-instance-method","html_id":"namespace(name,&amp;block)-instance-method","name":"namespace","doc":"Defines nested namespace.","summary":"<p>Defines nested namespace.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"args_string":"(name, &block)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L27","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L27","def":{"name":"namespace","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"with touch_namespace(name) yield\n@namespaces[name]\n"}},{"id":"namespaces(name)-instance-method","html_id":"namespaces(name)-instance-method","name":"namespaces","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"args_string":"(name)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L43","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L43","def":{"name":"namespaces","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@namespaces[name]?"}},{"id":"path-instance-method","html_id":"path-instance-method","name":"path","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L12","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L12","def":{"name":"path","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @parent\n  (@parent.not_nil!.path + @name) + \":\"\nelse\n  \"\"\nend"}},{"id":"task(name,dependencies=[]ofString,&block:Task,Args->Void)-instance-method","html_id":"task(name,dependencies=[]ofString,&amp;block:Task,Args-&gt;Void)-instance-method","name":"task","doc":"Defines new task.","summary":"<p>Defines new task.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"dependencies","doc":null,"default_value":"[] of String","external_name":"dependencies","restriction":""}],"args_string":"(name, dependencies = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>, &block : Task, Args -> Void)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L37","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L37","def":{"name":"task","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"dependencies","doc":null,"default_value":"[] of String","external_name":"dependencies","restriction":""}],"double_splat":null,"splat_index":null,"yields":2,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":"(Task, Args -> Void)"},"return_type":"","visibility":"Public","body":"task = (@tasks[name] = Task.new(block, dependencies, self, name, @@description))\n@@description = nil\ntask\n"}},{"id":"tasks(name)-instance-method","html_id":"tasks(name)-instance-method","name":"tasks","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"args_string":"(name)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L47","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L47","def":{"name":"tasks","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@tasks[name]?"}},{"id":"touch_namespace(name)-instance-method","html_id":"touch_namespace(name)-instance-method","name":"touch_namespace","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"args_string":"(name)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L32","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/namespace.cr#L32","def":{"name":"touch_namespace","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"__temp_23 = name\n@namespaces[__temp_23]? || (@namespaces[__temp_23] = Namespace.new(name, self))\n"}}],"macros":[],"types":[]},{"html_id":"github.com/imdrasil/sam.cr/Sam/Task","path":"Sam/Task.html","kind":"class","full_name":"Sam::Task","name":"Task","abstract":false,"superclass":{"html_id":"github.com/imdrasil/sam.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"github.com/imdrasil/sam.cr/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"github.com/imdrasil/sam.cr/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"sam/task.cr","line_number":2,"url":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr"}],"repository_name":"github.com/imdrasil/sam.cr","program":false,"enum":false,"alias":false,"aliased":"","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"github.com/imdrasil/sam.cr/Sam","kind":"module","full_name":"Sam","name":"Sam"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(block,deps,parent,name,description=nil)-class-method","html_id":"new(block,deps,parent,name,description=nil)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":""},{"name":"deps","doc":null,"default_value":"","external_name":"deps","restriction":""},{"name":"parent","doc":null,"default_value":"","external_name":"parent","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"description","doc":null,"default_value":"nil","external_name":"description","restriction":""}],"args_string":"(block, deps, parent, name, description = <span class=\"n\">nil</span>)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L13","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L13","def":{"name":"new","args":[{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":""},{"name":"deps","doc":null,"default_value":"","external_name":"deps","restriction":""},{"name":"parent","doc":null,"default_value":"","external_name":"parent","restriction":""},{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"description","doc":null,"default_value":"nil","external_name":"description","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(block, deps, parent, name, description)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"call(args:Args)-instance-method","html_id":"call(args:Args)-instance-method","name":"call","doc":"Launch current task. Prerequisites are invoked first.","summary":"<p>Launch current task.</p>","abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Args"}],"args_string":"(args : Args)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L33","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L33","def":{"name":"call","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Args"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@invoked = true\n@deps.each do |name|\n  invoke(name)\nend\ncase @block.arity\nwhen 0\n  (@block.as((-> Void))).call\nwhen 1\n  (@block.as((Task -> Void))).call(self)\nwhen 2\n  (@block.as((Task, Args -> Void))).call(self, args)\nelse\n  raise(\"Wrong task block arity - #{@block.arity} and maximum is 2.\")\nend\n"}},{"id":"description-instance-method","html_id":"description-instance-method","name":"description","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L28","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L28","def":{"name":"description","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@description || \"\""}},{"id":"execute(name,hash:Args::ALLOWED_HASH,arr:Array(Args::ALLOWED_TYPES))-instance-method","html_id":"execute(name,hash:Args::ALLOWED_HASH,arr:Array(Args::ALLOWED_TYPES))-instance-method","name":"execute","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Args::ALLOWED_HASH"},{"name":"arr","doc":null,"default_value":"","external_name":"arr","restriction":"Array(Args::ALLOWED_TYPES)"}],"args_string":"(name, hash : Args::ALLOWED_HASH, arr : Array(Args::ALLOWED_TYPES))","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L82","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L82","def":{"name":"execute","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Args::ALLOWED_HASH"},{"name":"arr","doc":null,"default_value":"","external_name":"arr","restriction":"Array(Args::ALLOWED_TYPES)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(find!(name)).call(Args.new(hash, arr))"}},{"id":"execute(name,args:Args)-instance-method","html_id":"execute(name,args:Args)-instance-method","name":"execute","doc":"Invoke the task even if it has been invoked.","summary":"<p>Invoke the task even if it has been invoked.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Args"}],"args_string":"(name, args : Args)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L74","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L74","def":{"name":"execute","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Args"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(find!(name)).call(args)"}},{"id":"execute(name,hash:Args::ALLOWED_HASH)-instance-method","html_id":"execute(name,hash:Args::ALLOWED_HASH)-instance-method","name":"execute","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Args::ALLOWED_HASH"}],"args_string":"(name, hash : Args::ALLOWED_HASH)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L78","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L78","def":{"name":"execute","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Args::ALLOWED_HASH"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(find!(name)).call(Args.new(hash, [] of Args::ALLOWED_TYPES))"}},{"id":"execute(name,*args)-instance-method","html_id":"execute(name,*args)-instance-method","name":"execute","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(name, *args)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L86","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L86","def":{"name":"execute","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":null,"splat_index":1,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(find!(name)).not_nil!.call(Args.new(Args::ALLOWED_HASH.new, args.to_a))"}},{"id":"find!(name)-instance-method","html_id":"find!(name)-instance-method","name":"find!","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"args_string":"(name)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L90","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L90","def":{"name":"find!","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"t = @parent.find(name)\nif t\nelse\n  raise(\"Task #{name} was not found\")\nend\nt.not_nil!\n"}},{"id":"invoke(name,hash:Args::ALLOWED_HASH,arr:Array(Args::ALLOWED_TYPES))-instance-method","html_id":"invoke(name,hash:Args::ALLOWED_HASH,arr:Array(Args::ALLOWED_TYPES))-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Args::ALLOWED_HASH"},{"name":"arr","doc":null,"default_value":"","external_name":"arr","restriction":"Array(Args::ALLOWED_TYPES)"}],"args_string":"(name, hash : Args::ALLOWED_HASH, arr : Array(Args::ALLOWED_TYPES))","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L61","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L61","def":{"name":"invoke","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Args::ALLOWED_HASH"},{"name":"arr","doc":null,"default_value":"","external_name":"arr","restriction":"Array(Args::ALLOWED_TYPES)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"t = find!(name)\nif t.invoked?\n  return\nend\nt.call(Args.new(hash, arr))\n"}},{"id":"invoke(name,args:Args)-instance-method","html_id":"invoke(name,args:Args)-instance-method","name":"invoke","doc":"Invoke the task if it is needed.","summary":"<p>Invoke the task if it is needed.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Args"}],"args_string":"(name, args : Args)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L49","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L49","def":{"name":"invoke","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":"Args"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"t = find!(name)\nif t.invoked?\n  return\nend\nt.call(args)\n"}},{"id":"invoke(name,hash:Args::ALLOWED_HASH)-instance-method","html_id":"invoke(name,hash:Args::ALLOWED_HASH)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Args::ALLOWED_HASH"}],"args_string":"(name, hash : Args::ALLOWED_HASH)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L55","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L55","def":{"name":"invoke","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"hash","doc":null,"default_value":"","external_name":"hash","restriction":"Args::ALLOWED_HASH"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"t = find!(name)\nif t.invoked?\n  return\nend\nt.call(Args.new(hash, [] of Args::ALLOWED_TYPES))\n"}},{"id":"invoke(name,*args)-instance-method","html_id":"invoke(name,*args)-instance-method","name":"invoke","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(name, *args)","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L67","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L67","def":{"name":"invoke","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":null,"splat_index":1,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"t = find!(name)\nif t.invoked?\n  return\nend\nt.not_nil!.call(Args.new(Args::ALLOWED_HASH.new, args.to_a))\n"}},{"id":"invoked?:Bool-instance-method","html_id":"invoked?:Bool-instance-method","name":"invoked?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L16","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L16","def":{"name":"invoked?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@invoked"}},{"id":"name:String-instance-method","html_id":"name:String-instance-method","name":"name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L8","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L8","def":{"name":"name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@name"}},{"id":"path-instance-method","html_id":"path-instance-method","name":"path","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L24","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L24","def":{"name":"path","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@parent.path + @name"}},{"id":"reenable-instance-method","html_id":"reenable-instance-method","name":"reenable","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L20","source_link":"https://github.com/imdrasil/sam.cr/blob/bf03da47561f31802bb7c92a86cd0153b98c4656/src/sam/task.cr#L20","def":{"name":"reenable","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@invoked = false"}}],"macros":[],"types":[]}]}]}})